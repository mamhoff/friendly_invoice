<h1>
  <% if @customer %>
    <%= "recurring invoices for #{@customer}" %>
  <% else %>
    <%= t("recurring invoices") %>
  <% end %>
  <small class="text-muted">
    <%= "(#{@count} #{t("found")})" %>
  </small>
</h1>
<div class="section-hd">
  <button class="btn dropdown-toggle section-hd__action" data-bs-target="#js-section-info" data-bs-toggle="collapse" id="js-section-info-button" type="button">
    <%= display_money @gross %>
  </button>
</div>
<div class="section-summary collapse" id="js-section-info">
  <ul class="list-group list-unstyled">
    <li>
      total gross
      <span class="badge bg-secondary rounded-pill float-end">
        <%= display_money @gross %>
      </span>
    </li>
    <li>
      total net
      <span class="badge bg-secondary rounded-pill float-end">
        <%= display_money @net %>
      </span>
    </li>
    <li>
      total tax
      <span class="badge bg-secondary rounded-pill float-end">
        <%= display_money @tax %>
      </span>
    </li>
  </ul>
</div>
<%= form_tag remove_recurring_invoices_path, method: :delete, id: 'js-list-form' do %>
  <div data-role="infinite-scroll">
    <div class="table-responsive">
      <table class="table table-hover table-striped table-bordered">
        <thead>
          <tr>
            <th class="table-select">
              <%= check_box_tag "select_all", 1, false, {"data-role" => "select-all-rows"} %>
            </th>
            <th>
              <%= sort_link(@search, :series_value, t("series")) %>
            </th>
            <th class="no-wrap">
              <%= sort_link(@search, :name, t("customer")) %>
            </th>
            <th class="no-wrap">
              <%= sort_link(@search, :period_type, t("frecuency")) %>
            </th>
            <th class="text-center">
              <%= sort_link(@search, :enabled, t("enabled")) %>
            </th>
            <th class="text-center">
              <%= sort_link(@search, :sent_by_email, t("send email")) %>
            </th>
            <th class="text-end">
              <%= sort_link(@search, :gross_amount, t("total")) %>
            </th>
          </tr>
        </thead>
        <tbody data-role="infinite-content">
          <%= render @recurring_invoices, current_page: @recurring_invoices.current_page %>
        </tbody>
      </table>
    </div>
    <div class="content-loading hide" data-role="infinite-status">
      <div class="spinner"></div>
    </div>
  </div>
<% end %>
<div class="action-buttons build-pending-invoices">
  <% if @any_invoices_to_be_built %>
    <%= link_to t(".build pending invoices"), generate_recurring_invoices_path, :method => :post, class: "btn btn-primary" %>
  <% else %>
    <span class="btn btn-secondary disabled">
      <%= t(".build pending invoices") %>
    </span>
  <% end %>
</div>

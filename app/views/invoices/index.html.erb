<h1>
  <% if @customer %>
    <%= "invoices for #{@customer}" %>
  <% else %>
    <%= t("invoices") %>
  <% end %>
  <small class="text-muted">
    <%= "(#{@count} #{t("found")})" %>
  </small>
</h1>
<div class="section-hd">
  <button class="btn dropdown-toggle section-hd__action" data-bs-target="#js-section-info" data-bs-toggle="collapse" id="js-section-info-button" type="button">
    <%= display_money @gross %>
  </button>
</div>
<div class="section-summary collapse" id="js-section-info">
  <ul class="list-group list-unstyled">
    <li>
      total gross
      <span class="badge bg-secondary rounded-pill float-end">
        <%= display_money @gross %>
      </span>
    </li>
    <li>
      total net
      <span class="badge bg-secondary rounded-pill float-end">
        <%= display_money @net %>
      </span>
    </li>
    <li>
      total tax
      <span class="badge bg-secondary rounded-pill float-end">
        <%= display_money @tax %>
      </span>
    </li>
  </ul>
</div>
<%= form_tag bulk_invoices_path, method: :post, id: 'js-list-form' do %>
  <input id="bulk_action" name="bulk_action" type="hidden">
  <div data-role="infinite-scroll">
    <div class="table-responsive">
      <table class="table table-hover table-striped table-bordered">
        <thead>
          <tr>
            <th class="table-select">
              <%= check_box_tag "select_all", 1, false, {"data-role" => "select-all-rows"} %>
            </th>
            <th class="no-wrap">
              <%= sort_link(@search, :number, t("reference")) %>
            </th>
            <th class="no-wrap">
              <%= sort_link(@search, :name, t("customer name")) %>
            </th>
            <th class="no-wrap">
              <%= sort_link(@search, :issue_date, t("date")) %>
            </th>
            <th class="text-center">
              <%= sort_link(@search, :sent_by_email, t("sent")) %>
            </th>
            <th class="text-center">
              <%= sort_link(@search, :status, t("status")) %>
            </th>
            <th class="text-end">
              <%= t("pending") %>
            </th>
            <th class="text-end">
              <%= sort_link(@search, :gross_amount, t("total")) %>
            </th>
          </tr>
        </thead>
        <tbody data-role="infinite-content">
          <%= render @invoices, current_page: @invoices.current_page %>
        </tbody>
      </table>
    </div>
    <div class="content-loading hide" data-role="infinite-status">
      <div class="spinner"></div>
    </div>
  </div>
<% end %>
<div class="action-buttons" data-role="action-buttons">
  <%= link_to t("send email"), '#', class: 'btn btn-primary', "data-role" => 'submit-form', "data-action" => 'send_email', "data-target" => '#js-list-form' %>
  <%= link_to t("set paid"), '#', class: 'btn btn-primary', "data-role" => 'submit-form', "data-action" => 'set_paid', "data-target" => '#js-list-form' %>
  <%= link_to t("download pdf"), '#', class: 'btn btn-primary', "data-role" => 'submit-form', "data-action" => 'pdf', "data-target" => '#js-list-form' %>
  <%= link_to t("duplicate"), '#', class: 'btn btn-primary', "data-role" => 'submit-form', "data-action" => 'duplicate', "data-target" => '#js-list-form' %>
</div>
